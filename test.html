<script>
function AudioEngine(audioctx,destination){
  this.audioctx = audioctx;
  if(!audioctx){
     AudioContext = window.AudioContext||window.webkitAudioContext;
     this.audioctx = new AudioContext();
  }
  if(!destination)
    this.destination=this.audioctx.destination;
  this.gain1 = this.audioctx.createGain();
  this.gain1.gain.value = 100;
  this.analys1 = this.audioctx.createAnalyser();
  this.analys1.fftSize = 2048;
  this.analys1.minDecibels = -100;
  this.analys1.maxDecibels = -30;
  this.analys1.smoothingTimeConstant = 0.8;
  this.analys1.connect(this.gain1,0);
  this.start=function(){
    this.osc2 = this.audioctx.createOscillator();
    this.osc2.type = "sine";
    this.osc2.frequency.value = 440;
    this.osc2.detune.value = 0;
    this.osc1 = this.audioctx.createOscillator();
    this.osc1.type = "square";
    this.osc1.frequency.value = 1;
    this.osc1.detune.value = 0;
    this.osc2.connect(this.destination,0);
    this.osc1.connect(this.analys1,0);
    this.gain1.connect(this.osc2.frequency,0);
    this.osc2.start(0);
    this.osc1.start(0);
  };
}
function SetWaveForm(){
  audioengine.osc1.type=document.getElementById("waveform").value;
}
window.addEventListener('load',function(){audioengine=new AudioEngine()});
</script>
<select id="waveform" onchange="SetWaveForm()"><option>sine</option><option>square</option><option>sawtooth</option><option>triangle</option></select><br/>
<button onclick='audioengine.start()'>Start</button>
